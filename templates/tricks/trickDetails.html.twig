{% extends 'generic/base.html.twig' %}
{% block title %}Details figure{% endblock %}
{% block body %}
    <!-- Trick hero section -->
        {% if mainMediaUrl %}
            <div class="container-fluid my-3 vh-100 text-center d-flex align-baseline position-relative" style="justify-content: center;align-items: center;background:url('{{ asset('uploads/images/')}}{{ mainMediaUrl }}') no-repeat;background-size:100% auto;">
        {% else %}
                <div class="container-fluid my-3 vh-100 text-center d-flex align-baseline position-relative" style="justify-content: center;align-items: center;background:url('https://images.unsplash.com/photo-1418662589339-364ad47f98a2?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1464&q=80') no-repeat;background-size:100% auto;">
        {% endif%}
                    {% if app.user %}

                <p class="h1 text-secondary p-1 bg-white" >{{ trick.name }}.</p>
                <a href="#medias_section" class="btn btn-info position-absolute bottom-0 end-50"> <i class="fas fa-arrow-down"></i> </a>
                <!-- Insert edit/delete buttons -->
                <div class="col-1 position-absolute top-0 end-0">
                    {#<div class="col-2 text-center">#}<div class="row mt-2">
                        <div class="col-6 text-center text-white my-1">
                            <a class="btn btn-secondary text-center rounded" href="{#{{ path('Media.update', {mediaId:mainMediaId}) }}#}#"><i class="far fa-edit"></i></a>
                        </div>
                        <div class="col-6 text-center my-1">
                            <a class="btn btn-danger text-center rounded" href="{{ path('Media.delete', {mediaId:mainMediaId}) }}"><i class="far fa-trash-alt"></i></a>
                        </div>
                        {#</div>#}</div>
                </div>
                    {% endif%}
            </div>

    <div class="container" id="medias_section">
        <!-- Medias cards -->
        <div class="row d-flex justify-content-center">
            {% for media in medias %}
                {% if not media.isMain %}
                    <div class="col-4">
                        <div class="card my-2 h-100">
                            <div class="card-body">
                                {% if media.mediaType.id == 2 %}
                                    <div class="embed-responsive embed-responsive-16by9">
                                        <iframe class="embed-responsive-item" src="{{ media.url }}" allowfullscreen></iframe>
                                    </div>
                                {% endif %}
                                {% if media.mediaType.id == 1 and not media.isMain %}
                                    <div class="card-img">
                                        <img class="img-fluid" src="{{ asset('uploads/images/')}}{{ media.url }}">
                                    </div>
                                {% endif %}
                                {% if app.user %}
                                <div class="row text-white mt-3 d-flex align-baseline">
                                    <div class="col-6 text-center">
                                        <a class="btn btn-secondary text-center rounded" href="{#{{ path('Media.update', {mediaId:media.id}) }}#}#"><i class="far fa-edit"></i></a>
                                    </div>
                                    <div class="col-6 text-center">
                                        <a class="btn btn-danger text-center rounded" href="{{ path('Media.delete', {mediaId:media.id}) }}"><i class="far fa-trash-alt"></i></a>
                                    </div>
                                </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                {% endif %}
            {% endfor %}
        </div>
    </div>
    <!-- Show Trick description -->
    <div class="container border-1 my-3" id="trick_description">

        <p>
            Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam,
            eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit
            aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est,
            qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam
            aliquam quaerat voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea
            commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem eum
            fugiat quo voluptas nulla pariatur?
        </p>
    </div>
    <!-- Trick tags -->
    <div class="container" id="trick_tags">
        <div class="d-flex justify-content-around">
            {% for key, tag in tags %}
                <div class=" px-3 py-2 my-3 border border-primary rounded text-primary">{{key}}: {{ tag }}</div>
            {% endfor %}
        </div>
    </div>
    <hr class="my-3 w-50 mx-auto" style="opacity:0.1">
    <!-- leave a comment -->
    <div class="container my-4 py-4 d-flex justify-content-center" >
        {% if app.user %}
            {#<form name="leave_comment" class="text-center ">
                <div class="row">
                    <div class="col-7">
                        <input type="text" class="form-control" placeholder="Votre commentaire">
                    </div>

                    <div class="col-3">
                        <button type="submit" class="btn btn-primary">Commenter</button>
                    </div>
                </div>
            </form>#}
            {{ form_start(commentForm) }}
            {{ form_row(commentForm.commentText) }}
            <div class="text-center">
                <button type="submit" class="btn btn-primary">Ajouter commentaire</button>
            </div>
            {{ form_end(commentForm) }}
        {% endif %}
        {% if not app.user %}
            <div class="text-center">
                <a class="btn btn-info" href="{{ path('User.login')}}">Connectez vous pour laisser un commentaire</a>
            </div>
        {% endif %}
    </div>
    <!-- trick comments -->
    <hr class="my-3 w-50 mx-auto" style="opacity:0.1">
    <div class="container my-4 py-3" id="trick_tags">
        {% for comment in comments %}
        {% if comment.isValidated %}
            <div class="row my-3 d-flex justify-content-center">
                <div class="col-1 mx-auto my-auto text-center">
                    <img class="img-fluid rounded-circle my-auto" src="https://www.w3schools.com/howto/img_avatar2.png" style="max-width:50px">
                    <div class="text-secondary">{{ comment.author.username }}</div>
                </div>
                <div class="col-11 p-1">
                    <div class="border h-100 p-2">{{ comment.commentText }}</div>
                </div>
            </div>
        {% endif %}
        {% endfor %}
        <div class="row my-2 d-flex justify-content-center text-center position-relative">
            <div class="col-2">
                <div class="text-center">
                    <a href="#tricks_list_section" class="btn btn-info "> Plus de commentaires</a>
                </div>
            </div>
            <div class="text-end">
                <a href="#medias_section" class="btn btn-info "> <i class="fas fa-arrow-up"></i> </a>
            </div>
        </div>
    </div>

{% endblock %}

